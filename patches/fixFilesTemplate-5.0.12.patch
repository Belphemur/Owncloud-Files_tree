--- a/apps/files/templates/index.php	2013-11-18 09:08:33.000000000 +0200
+++ b/apps/files/templates/index.php	2013-11-18 10:05:44.000000000 +0200
@@ -49,7 +49,52 @@
 		</div>
 		<div id="file_action_panel"></div>
 	<?php elseif( !$_['isPublic'] ):?>
-		<div class="actions"><input type="button" disabled value="<?php p($l->t('You don’t have write permissions here.'))?>"></div>
+		<div class="actions"><input type="button" id="permissiondenied" disabled value="<?php p($l->t('You don’t have write permissions here.'))?>">
+			<div id="new" class="button" style="display: None;" >
+				<a><?php p($l->t('New'));?></a>
+				<ul>
+					<li style="background-image:url('<?php p(OCP\mimetype_icon('text/plain')) ?>')"
+						data-type='file'><p><?php p($l->t('Text file'));?></p></li>
+					<li style="background-image:url('<?php p(OCP\mimetype_icon('dir')) ?>')"
+						data-type='folder'><p><?php p($l->t('Folder'));?></p></li>
+					<li style="background-image:url('<?php p(OCP\image_path('core', 'actions/public.png')) ?>')"
+						data-type='web'><p><?php p($l->t('From link'));?></p></li>
+				</ul>
+			</div>
+			<div id="upload" class="button"
+				 title="<?php p($l->t('Upload') . ' max. '.$_['uploadMaxHumanFilesize']) ?>" style="display: None;">
+				<form data-upload-id='1'
+					  id="data-upload-form"
+					  class="file_upload_form"
+					  action="<?php print_unescaped(OCP\Util::linkTo('files', 'ajax/upload.php')); ?>"
+					  method="post"
+					  enctype="multipart/form-data"
+					  target="file_upload_target_1">
+					<input type="hidden" name="MAX_FILE_SIZE" id="max_upload"
+						   value="<?php p($_['uploadMaxFilesize']) ?>">
+					<!-- Send the requesttoken, this is needed for older IE versions
+						 because they don't send the CSRF token via HTTP header in this case -->
+					<input type="hidden" name="requesttoken" value="<?php p($_['requesttoken']) ?>" id="requesttoken">
+					<input type="hidden" class="max_human_file_size"
+						   value="(max <?php p($_['uploadMaxHumanFilesize']); ?>)">
+					<input type="hidden" name="dir" value="<?php p($_['dir']) ?>" id="dir">
+					<input type="file" id="file_upload_start" name='files[]'/>
+					<a href="#" class="svg"></a>
+				</form>
+			</div>
+			<?php if ($_['trash'] ): ?>
+			<div id="trash" class="button">
+				<a><?php p($l->t('Deleted files'));?></a>
+			</div>
+			<?php endif; ?>
+			<div id="uploadprogresswrapper">
+				<div id="uploadprogressbar"></div>
+				<input type="button" class="stop" style="display:none"
+					value="<?php p($l->t('Cancel upload'));?>"
+				/>
+			</div>
+
+                </div>
 		<input type="hidden" name="dir" value="<?php p($_['dir']) ?>" id="dir">
 	<?php endif;?>
 	<input type="hidden" name="permissions" value="<?php p($_['permissions']); ?>" id="permissions">
